<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MP4 → MP3 Converter</title>
  <meta name="description" content="ブラウザで動く MP4 を MP3 に変換するツール。ドラッグ＆ドロップ、ビットレート選択、進捗表示に対応。">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <div class="logo" aria-hidden="true">MP3</div>
      <div>
        <h1>MP4 を MP3 に変換</h1>
        <p class="lead">ブラウザ内で変換。ドラッグ＆ドロップ、ビットレート選択、進捗表示、変換履歴に対応。</p>
      </div>
    </header>

    <section class="card" aria-labelledby="title">
      <div class="left">
        <div id="dropzone" class="drop" tabindex="0" aria-label="ファイルをドロップまたはクリックして選択">
          <svg width="56" height="56" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 3v10" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M8 7l4-4 4 4" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 15v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" opacity="0.9"/>
          </svg>
          <div class="drop-title">ここにファイルをドロップ</div>
          <div class="hint">またはクリックして選択。対応: MP4, MOV, MKV などの動画ファイル</div>
          <input id="fileInput" type="file" accept="video/*,audio/*" aria-hidden="true" />
        </div>

        <div id="fileInfo" class="file-info" hidden>
          <div class="filemeta">
            <div>
              <div class="name" id="fileName"></div>
              <div class="hint" id="fileSize"></div>
            </div>
            <div style="text-align:right">
              <div class="hint">所要目安</div>
              <div id="estTime" class="estimate">—</div>
            </div>
          </div>

          <div class="controls">
            <button id="convertBtn" class="primary" disabled>変換する</button>
            <button id="previewBtn" class="ghost" disabled>プレビュー</button>
            <button id="clearBtn" class="ghost">クリア</button>
          </div>
        </div>

        <pre id="logArea" class="log" hidden></pre>
      </div>

      <aside class="right" aria-label="設定と進捗">
        <div>
          <label class="small" for="bitrate">ビットレート</label>
          <select id="bitrate">
            <option value="192k">192 kbps</option>
            <option value="160k">160 kbps</option>
            <option value="128k" selected>128 kbps</option>
            <option value="96k">96 kbps</option>
            <option value="64k">64 kbps</option>
          </select>

          <label class="small" for="samplerate">サンプルレート</label>
          <select id="samplerate">
            <option value="44100" selected>44100 Hz</option>
            <option value="48000">48000 Hz</option>
            <option value="22050">22050 Hz</option>
          </select>

          <div class="progresswrap">
            <label class="small">進捗</label>
            <progress id="progress" value="0" max="100"></progress>
            <div class="status">
              <div id="statusText">待機中</div>
              <div id="percent">0%</div>
            </div>
          </div>

          <div class="history" id="history" aria-live="polite">
            <div class="hint">変換履歴</div>
          </div>

          <div class="action-row">
            <button id="downloadBtn" class="primary" hidden>ダウンロード</button>
            <button id="openAudioBtn" class="ghost" hidden>再生</button>
          </div>

          <div class="note">注意: ブラウザでの変換はリソースを消費します。長時間の動画はサーバー処理を検討してください。</div>
        </div>
      </aside>
    </section>

    <div class="toast" id="toast" role="status" aria-live="polite"></div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
